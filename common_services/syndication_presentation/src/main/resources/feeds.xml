<?xml version="1.0" encoding="UTF-8"?>
<!-- 
/*
* CDDL HEADER START
*
* The contents of this file are subject to the terms of the
* Common Development and Distribution License, Version 1.0 only
* (the "License"). You may not use this file except in compliance
* with the License.
*
* You can obtain a copy of the license at license/ESCIDOC.LICENSE
* or http://www.escidoc.de/license.
* See the License for the specific language governing permissions
* and limitations under the License.
*
* When distributing Covered Code, include this CDDL HEADER in each
* file and include the License file at license/ESCIDOC.LICENSE.
* If applicable, add the following below this CDDL HEADER, with the
* fields enclosed by brackets "[]" replaced with your own identifying
* information: Portions Copyright [yyyy] [name of copyright owner]
*
* CDDL HEADER END
*/

/*
* Copyright 2006-2009 Fachinformationszentrum Karlsruhe Gesellschaft
* für wissenschaftlich-technische Information mbH and Max-Planck-
* Gesellschaft zur Förderung der Wissenschaft e.V.
* All rights reserved. Use is subject to license terms.
*/
-->

<!--
	PubMan feeders Initial creation: vmakarenko $Author$ $Revision$
	$LastChangedDate$
-->
<feeds xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<comments> 
There are following limitations for the feeds:
  All feeds:
    a. Maximum number of records: ${escidoc.syndication.maximum.records}
    b. Time to the next caching: ${escidoc.syndication.ttl}
  RSS 0.9, RSS 0.91N, RSS 0.91U: 
    a. Number of items &lt;= 15
    b. Length of the entry title should be &lt;= 100
  RSS 0.9: 
    a. Length of the name of the channel and image &lt;= 40
	</comments>
	<feed>
<!--		The title of the feed -->
		<title>Recent releases in repository</title>
		
<!--		Feed's description -->
		<description>Recent releases in repository (item versions)</description>
		
		<!-- Identifier of the feeder class -->
		<!-- <dc:identifier>escidoc:feed_1</dc:identifier> -->
		
		<!-- supported output feed formats-->
		<feedTypes>rss_0.91N,rss_0.93,rss_0.92,rss_1.0,rss_0.94,rss_2.0,rss_0.91U,rss_0.9,atom_1.0,atom_0.3</feedTypes>
		<!--
			Permanent link to the originated site, e.g. http://pubman.mpdl.mpg.de
		-->
		<link>${baseUrl}/pubman?entry=feed&amp;name=releases&amp;type=${feedType}</link>
		<!--
			Permanent link to the feed under the link to the originated site
		-->
		<uri>${baseUrl}/syndication/feed/${feedType}/releases</uri>
		
		<!-- Categories of the feed-->
		<category>MPG</category>
		<category>PubMan</category>
		
		<!-- Copyright -->
		<copyright>Copyright</copyright>
		
		<author>
			<name>makarenko@mpdl.mpg.de (Vlad Makarenko)</name>
			<email>makarenko@mpdl.mpg.de</email>
			<uri>http://www.mpdl.mpg.de/</uri>
		</author>
		
		<!-- Charset encoding of the feed-->
		<!-- <encoding>UTF-8</encoding>-->
		
		<!-- Image of the feed -->
		<image>
		
			<!--			Text alternative if image cannot be dispalyed-->
			<title>Recent releases in repository</title>
			
			<!--			Location of the image file-->
			<url>${baseUrl}/syndication/resources/escidoc-css/images/about.gif</url>
			
			<!--			Link back to the site-->
			<link>${baseUrl}/pubman?entry=feed&amp;name=releases&amp;type=${feedType}</link>
			
			<!--			Tooltip for the image -->
			<description>Recent releases in repository (item versions)</description>
		</image>

		<!-- Language of the feed's content -->
		<!--<dc:language xsi:type="dcterms:RFC3066">en-US</dc:language>-->
		<language>en-US</language>
		
		<!-- Definition of the feed's entries retrieval -->
		<entries context="cql">
			<!-- CQL query which fetches required items-->
			<!-- 
				TODO: escidoc.context.objid&lt;&gt;escidoc:persistent3 
				should be removed after fixing of the transformation problem with some testing items 
			-->
			<query>escidoc.content-model.objid=escidoc:persistent4 and escidoc.public-status=released and escidoc.context.objid&lt;&gt;escidoc:persistent3</query>
			<sortKeys>escidoc.latest-release.date,,0</sortKeys>
			<maximumRecords>${escidoc.syndication.maximum.records}</maximumRecords>
		</entries>
		
		<caching>
			<status>true</status>
			<ttl>${escidoc.syndication.ttl}</ttl>
		</caching>	
			
	</feed>
	<feed>
		<title>Recent releases for a specific Organizational Unit</title>
		<description>Recent releases for Organizational Unit: ${organizationName}, eSciDocID: ${organizationId}</description>
		<!-- <dc:identifier>escidoc:feed_2</dc:identifier>-->
		<feedTypes>rss_0.91N,rss_0.93,rss_0.92,rss_1.0,rss_0.94,rss_2.0,rss_0.91U,rss_0.9,atom_1.0,atom_0.3</feedTypes>
		<link>${baseUrl}/pubman?entry=feed&amp;name=organizational_unit_${organizationId}&amp;type=${feedType}</link>
		<uri>${baseUrl}/syndication/feed/${feedType}/publications/organization/${organizationId}</uri>
		<category>MPG</category>
		<category>PubMan</category>
		<copyright>Copyright</copyright>
		<author>
			<name>makarenko@mpdl.mpg.de (Vlad Makarenko)</name>
			<email>makarenko@mpdl.mpg.de</email>
			<uri>http://www.mpdl.mpg.de/</uri>
		</author>		
		<image>
			<title>Recent releases for Organizational Unit: ${organizationName}</title>
			<url>http://localhost:8080/syndication/resources/escidoc-css/images/about.gif</url>
			<link>${baseUrl}/pubman?entry=feed&amp;name=organizational_unit_${organizationId}&amp;type=${feedType}</link>
			<description>Recent releases for a specific Organization Unit (item versions)</description>
		</image>
		
		<language>en-US</language>
		
		<entries context="cql">
			<query>(escidoc.content-model.objid=escidoc:persistent4 and escidoc.any-organization-pids=${organizationId} and escidoc.public-status=released)</query>
			<sortKeys>escidoc.latest-release.date,,0</sortKeys>
			<maximumRecords>${escidoc.syndication.maximum.records}</maximumRecords>
		</entries>
		
		<caching>
			<status>true</status>
			<ttl>${escidoc.syndication.ttl}</ttl>
		</caching>	
			
	</feed>
<!--	<feed>-->
<!--		<title>Recent changes for a specific publication (PID)</title>-->
<!--		<description>Recent changes for a specific publication, PID is specified</description>-->
<!--		<feedTypes>rss_0.91N,rss_0.93,rss_0.92,rss_1.0,rss_0.94,rss_2.0,rss_0.91U,rss_0.9,atom_1.0,atom_0.3</feedTypes>-->
<!--		<link>${baseUrl}/pubman?entry=feed&amp;name=recent_changes_pid_${itemPid}&amp;type=${feedType}</link>-->
<!--		<uri>${baseUrl}/syndication/feed/${feedType}/publications/item/pid/${itemPid}</uri>-->
<!--		<category>MPG</category>-->
<!--		<category>PubMan</category>-->
<!--		<copyright>Copyright</copyright>-->
<!--		<author>-->
<!--			<name>makarenko@mpdl.mpg.de (Vlad Makarenko)</name>-->
<!--			<email>makarenko@mpdl.mpg.de</email>-->
<!--			<uri>http://www.mpdl.mpg.de/</uri>-->
<!--		</author>-->
<!--		<image>-->
<!--			<title>Recent changes for a specific publication</title>-->
<!--			<url>http://localhost:8080/syndication/resources/escidoc-css/images/about.gif</url>-->
<!--			<link>${baseUrl}/pubman?entry=feed&amp;name=recent_changes_pid_${itemPid}&amp;type=${feedType}</link>-->
<!--			<description>Recent changes for a specific publication</description>-->
<!--		</image>-->
<!--		<language >en-US</language>-->
<!--		<entries context="cql">-->
<!--			<query>escidoc.content-model.objid=escidoc:persistent4 and escidoc.pid=${itemPid} and escidoc.context.objid&lt;&gt;escidoc:persistent3</query>-->
<!--			<sortKeys>sort.escidoc.pid,,0</sortKeys>-->
<!--			<maximumRecords>${escidoc.syndication.maximum.records}</maximumRecords>-->
<!--		</entries>-->
<!--	</feed>-->
<!--	<feed>-->
<!--		<title>Recent changes for a specific publication (eSciDoc OBJID)</title>-->
<!--		<description>Recent changes for a specific publication, eSciDoc OBJID is specified</description>-->
<!--		<feedTypes>rss_0.91N,rss_0.93,rss_0.92,rss_1.0,rss_0.94,rss_2.0,rss_0.91U,rss_0.9,atom_1.0,atom_0.3</feedTypes>-->
<!--		<link>${baseUrl}/pubman?entry=feed&amp;name=recent_changes_objid_${itemObjid}&amp;type=${feedType}</link>-->
<!--		<uri>${baseUrl}/syndication/feed/${feedType}/publications/item/objid/${itemObjid}</uri>-->
<!--		<category>MPG</category>-->
<!--		<category>PubMan</category>-->
<!--		<copyright>Copyright</copyright>-->
<!--		<author>-->
<!--			<name>makarenko@mpdl.mpg.de (Vlad Makarenko)</name>-->
<!--			<email>makarenko@mpdl.mpg.de</email>-->
<!--			<uri>http://www.mpdl.mpg.de/</uri>-->
<!--		</author>-->
<!--		<image>-->
<!--			<title>Recent changes for a specific publication</title>-->
<!--			<url>http://localhost:8080/syndication/resources/escidoc-css/images/about.gif</url>-->
<!--			<link>${baseUrl}/pubman?entry=feed&amp;name=recent_changes_objid_${itemObjid}&amp;type=${feedType}</link>-->
<!--			<description>Recent changes for a specific publication</description>-->
<!--		</image>-->
<!--		<language>en-US</language>-->
<!--		<entries context="cql">-->
<!--			<query>escidoc.content-model.objid=escidoc:persistent4 and escidoc.objid=${itemObjid} and escidoc.context.objid&lt;&gt;escidoc:persistent3</query>-->
<!--			<sortKeys>sort.escidoc.objid,,0</sortKeys>-->
<!--			<maximumRecords>${escidoc.syndication.maximum.records}</maximumRecords>-->
<!--		</entries>-->
<!--	</feed>-->
</feeds>