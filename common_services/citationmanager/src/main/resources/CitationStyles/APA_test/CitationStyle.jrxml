<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE jasperReport PUBLIC "-//JasperReports//DTD JasperReport//EN" "http://jasperreports.sourceforge.net/dtds/jasperreport.dtd">

<jasperReport name="APA" pageWidth="595" pageHeight="842" columnWidth="535" leftMargin="30" rightMargin="30" topMargin="20" bottomMargin="20" scriptletClass="de.mpg.escidoc.services.citationmanager.scriptlets.ScriptletForRepeatableElements_APA">
	<property name="ireport.scriptlethandling" value="2"/>
	<property name="ireport.encoding" value="UTF-8"/>
	<import value="net.sf.jasperreports.engine.*"/>
	<import value="java.util.*"/>
	<import value="net.sf.jasperreports.engine.data.*"/>
	<reportFont name="Normal" isDefault="false" fontName="Arial" size="12" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="ARIAL.TTF" pdfEncoding="Identity-H" isPdfEmbedded="true"/>
	<queryString>
		<![CDATA[//item/md-records/md-record]]>
	</queryString>
	<field name="../../@objid" class="java.lang.String">
		<fieldDescription><![CDATA[../../@objid]]></fieldDescription>
	</field>
	<field name="hasPublication" class="java.lang.String">
		<fieldDescription><![CDATA[hasPublication]]></fieldDescription>
	</field>
	<field name="publication/title" class="java.lang.String">
		<fieldDescription><![CDATA[publication/title]]></fieldDescription>
	</field>
	<field name="publication/titleAlternative" class="java.lang.String">
		<fieldDescription><![CDATA[publication/titleAlternative]]></fieldDescription>
	</field>
	<field name="publication/dateSubmitted" class="java.lang.String">
		<fieldDescription><![CDATA[publication/dateSubmitted]]></fieldDescription>
	</field>
	<field name="publication/date" class="java.lang.String">
		<fieldDescription><![CDATA[publication/date]]></fieldDescription>
	</field>
	<field name="publication/creator/person/family-name" class="java.lang.String">
		<fieldDescription><![CDATA[publication/creator/person/family-name]]></fieldDescription>
	</field>
	<field name="publication/creator/person/given-name" class="java.lang.String">
		<fieldDescription><![CDATA[publication/creator/person/given-name]]></fieldDescription>
	</field>
	<variable name="CS_1_CSLD_1_P_default_E_1" class="java.lang.String">
		<variableExpression><![CDATA[$F{../../@objid}!=null ? (!(($P{REPORT_SCRIPTLET}.xmlEncode($F{../../@objid}))).trim().equals("") ? ($P{REPORT_SCRIPTLET}.xmlEncode($F{../../@objid})) : "") : ""]]></variableExpression>
	</variable>
	<variable name="CS_1_CSLD_2_P_default_E_1" class="java.lang.String">
		<variableExpression><![CDATA[$F{publication/title}!=null ? (!(($P{REPORT_SCRIPTLET}.xmlEncode($F{publication/title}))).trim().equals("") ? ($P{REPORT_SCRIPTLET}.xmlEncode($F{publication/title})) : "") : ""]]></variableExpression>
	</variable>
	<variable name="CS_1_CSLD_2_P_default_E_2" class="java.lang.String">
		<variableExpression><![CDATA[$F{publication/titleAlternative}!=null ? (!(($P{REPORT_SCRIPTLET}.xmlEncode($F{publication/titleAlternative}))).trim().equals("") ? ($P{REPORT_SCRIPTLET}.xmlEncode($F{publication/titleAlternative})) : "") : ""]]></variableExpression>
	</variable>
	<variable name="CS_1_CSLD_2_P_default_E_3" class="java.lang.String">
		<variableExpression><![CDATA[$F{publication/dateSubmitted}!=null ? (!(($P{REPORT_SCRIPTLET}.xmlEncode($F{publication/dateSubmitted}))).trim().equals("") ? ($P{REPORT_SCRIPTLET}.xmlEncode($F{publication/dateSubmitted})) : "") : ""]]></variableExpression>
	</variable>
	<variable name="CS_1_CSLD_2_P_default_E_4" class="java.lang.String">
		<variableExpression><![CDATA[$F{publication/date}!=null ? (!(($P{REPORT_SCRIPTLET}.xmlEncode($F{publication/date}))).trim().equals("") ? ($P{REPORT_SCRIPTLET}.xmlEncode($F{publication/date})) : "") : ""]]></variableExpression>
	</variable>
	<variable name="CS_1_CSLD_2_P_default_E_5" class="java.lang.String">
		<variableExpression><![CDATA[$F{publication/creator/person/family-name}!=null ? (!(($P{REPORT_SCRIPTLET}.xmlEncode($F{publication/creator/person/family-name}))).trim().equals("") ? ($P{REPORT_SCRIPTLET}.xmlEncode($F{publication/creator/person/family-name})) : "") : ""]]></variableExpression>
	</variable>
	<variable name="CS_1_CSLD_2_P_default_E_6" class="java.lang.String">
		<variableExpression><![CDATA[$F{publication/creator/person/given-name}!=null ? (!(($P{REPORT_SCRIPTLET}.xmlEncode($F{publication/creator/person/given-name}))).trim().equals("") ? ($P{REPORT_SCRIPTLET}.xmlEncode($F{publication/creator/person/given-name})) : "") : ""]]></variableExpression>
	</variable>
	<variable name="CS_1_CSLD_1" class="java.lang.String">
		<variableExpression><![CDATA[(($F{hasPublication}.equals("false")) ? ((!($P{REPORT_SCRIPTLET}.join(new String[]{$V{CS_1_CSLD_1_P_default_E_1}}, " ")).trim().equals("") ? "## Citaion style layout is not defined for metadata record: " + $P{REPORT_SCRIPTLET}.join(new String[]{$V{CS_1_CSLD_1_P_default_E_1}}, " ") : "")) : "")]]></variableExpression>
	</variable>
	<variable name="CS_1_CSLD_2" class="java.lang.String">
		<variableExpression><![CDATA[(!($P{REPORT_SCRIPTLET}.join(new String[]{$V{CS_1_CSLD_2_P_default_E_1},$V{CS_1_CSLD_2_P_default_E_2},$V{CS_1_CSLD_2_P_default_E_3},$V{CS_1_CSLD_2_P_default_E_4},$V{CS_1_CSLD_2_P_default_E_5},$V{CS_1_CSLD_2_P_default_E_6}}, "")).trim().equals("") ? $P{REPORT_SCRIPTLET}.join(new String[]{$V{CS_1_CSLD_2_P_default_E_1},$V{CS_1_CSLD_2_P_default_E_2},$V{CS_1_CSLD_2_P_default_E_3},$V{CS_1_CSLD_2_P_default_E_4},$V{CS_1_CSLD_2_P_default_E_5},$V{CS_1_CSLD_2_P_default_E_6}}, "") + "." : "")]]></variableExpression>
	</variable>
	<variable name="citation" class="java.lang.String">
		<variableExpression><![CDATA[($P{REPORT_SCRIPTLET}.cleanCit(!$V{CS_1_CSLD_1}.trim().equals("") ? $V{CS_1_CSLD_1}:!$V{CS_1_CSLD_2}.trim().equals("") ? $V{CS_1_CSLD_2}:""))]]></variableExpression>
	</variable>
	<background>
		<band/>
	</background>
	<title>
		<band height="52">
			<staticText>
				<reportElement key="staticText" positionType="Float" stretchType="RelativeToBandHeight" mode="Transparent" x="1" y="13" width="533" height="32" forecolor="#000000" backcolor="#FFFFFF"/>
				<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000" rightBorder="None" rightBorderColor="#000000"/>
				<textElement textAlignment="Center" verticalAlignment="Top" rotation="None" lineSpacing="Single">
					<font fontName="Arial" size="18" isBold="true" isItalic="false" isUnderline="false" pdfFontName="ARIALBD.TTF" pdfEncoding="Identity-H" isPdfEmbedded="true"/>
				</textElement>
				<text><![CDATA[Citation Style: APA]]></text>
			</staticText>
			<line direction="BottomUp">
				<reportElement key="line" mode="Opaque" x="0" y="50" width="535" height="1" forecolor="#000000" backcolor="#FFFFFF"/>
				<graphicElement pen="2Point" fill="Solid"/>
			</line>
			<line>
				<reportElement key="line" mode="Opaque" x="0" y="0" width="535" height="1" forecolor="#000000" backcolor="#FFFFFF"/>
				<graphicElement pen="2Point" fill="Solid"/>
			</line>
		</band>
	</title>
	<pageHeader>
		<band/>
	</pageHeader>
	<columnHeader>
		<band/>
	</columnHeader>
	<detail>
		<band height="1">
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true" hyperlinkType="None">
				<reportElement key="textField-1" mode="Opaque" x="0" y="0" width="533" height="1" isRemoveLineWhenBlank="true" isPrintWhenDetailOverflows="true" forecolor="#000000" backcolor="#FFFFFF">
					<printWhenExpression><![CDATA[$V{citation}==null ? Boolean.FALSE : Boolean.TRUE]]></printWhenExpression>
				</reportElement>
				<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000" rightBorder="None" rightBorderColor="#000000"/>
				<textElement textAlignment="Justified" verticalAlignment="Top" rotation="None" lineSpacing="1_1_2" isStyledText="true">
					<font reportFont="Normal"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$V{citation} + "\n"]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band/>
	</columnFooter>
	<pageFooter>
		<band/>
	</pageFooter>
	<summary>
		<band/>
	</summary>
</jasperReport>
